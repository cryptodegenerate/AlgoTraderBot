# Goose Alpha — CEX Momentum Breakout Bot (Bybit/OKX)

A production-ready scaffold for a momentum breakout bot running on centralised exchanges via `ccxt`.
Designed for **Replit (dev)** and **Railway (hosting)** with Docker.

## What it does
- Polls 1m OHLCV for configured symbols (default: BTCUSDT,ETHUSDT,SOLUSDT)
- Generates **breakout signals**: close > N-bar high + volume z-score filter
- Places orders with **ATR/percent SL** and **trailing stops** (CEX-permitting) or simulates fills in DRY_RUN
- Enforces **risk per trade** and **daily max drawdown** kill-switch
- Sends **Telegram** alerts and exposes a **FastAPI** `/status` endpoint
- Logs trades, equity, and errors to SQLite at `data/bot.db`

> Start in **DRY_RUN=true** mode to verify everything before live trading.

---

## Quick start (Replit → Railway)

### 1) Replit (dev & testing)
1. Create a new Replit (Python).
2. Upload this folder or connect to your GitHub repo.
3. Add **Secrets** (left sidebar → Tools → Secrets):
   - `EXCHANGE` = `bybit` (or `okx`)
   - `API_KEY`, `API_SECRET` (optional in DRY_RUN)
   - `SYMBOLS` = `BTC/USDT,ETH/USDT,SOL/USDT`  *(use **slash** format for ccxt)*
   - `TIMEFRAME` = `1m`
   - `RISK_PER_TRADE` = `0.0075`
   - `DAILY_MAX_DD` = `0.05`
   - `DRY_RUN` = `true`
   - `TELEGRAM_BOT_TOKEN`, `TELEGRAM_CHAT_ID` (optional)
4. Run: it starts the bot and a FastAPI server at `/status` on port 8000.

### 2) Railway (24/7 hosting)
- Deploy with Docker (recommended).
- Set the same env vars in Railway **Variables**.
- Railway will expose the `/status` on the assigned URL.

### Env Vars (.env example)
See `.env.example` for the full list. Important ones:
```
EXCHANGE=bybit
API_KEY=your_key
API_SECRET=your_secret
SYMBOLS=BTC/USDT,ETH/USDT,SOL/USDT
TIMEFRAME=1m
RISK_PER_TRADE=0.0075
DAILY_MAX_DD=0.05
DRY_RUN=true
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
```

### Build/Run with Docker (locally or on Railway)
```
docker build -t goose-cex-bot .
docker run --env-file .env -p 8000:8000 goose-cex-bot
```

---

## Strategy (quick overview)
- **Breakout:** Enter long if the latest close > highest high of last `HHV_LEN` bars and `volume_zscore > Z_MIN`.
- **Risk:** position_size = (equity * RISK_PER_TRADE) / stop_distance.
- **Stops:** ATR-based or percent-based; trailing with multiplier.
- **Daily Kill-Switch:** If intra-day drawdown exceeds `DAILY_MAX_DD`, bot halts new entries.

Tune in `app/strategy.py` with env-configured parameters.

---

## Minimal API
- `GET /status`: basic health + equity + open positions
- `GET /metrics`: simple stats
- `POST /kill`: sets daily kill-switch (requires `ADMIN_TOKEN` if set)

---

## Notes
- Bybit/OKX **symbol formatting** differs between REST and ccxt unified. Use `BTC/USDT` (slash) in env; the bot handles mapping.
- Some advanced stop types may be emulated if the exchange lacks native trailing stops.
- Start in **DRY_RUN=true**. When confident, set `DRY_RUN=false` and fill keys.
